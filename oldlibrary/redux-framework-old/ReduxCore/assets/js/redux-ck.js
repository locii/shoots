/*global jQuery, document, redux.args, confirm, relid:true, console, jsonView */function getContrastColour(e){retVal="#444444";if(e!==""){e=e.replace("#","");var t=parseInt(e.substr(0,2),16),n=parseInt(e.substr(2,2),16),r=parseInt(e.substr(4,2),16),i=(t*299+n*587+r*114)/1e3;retVal=i>=128?"#444444":"#ffffff"}return retVal}function verify_fold(e){jQuery(document).ready(function(t){console.log(verify_fold);if(e.hasClass("redux-info")||e.hasClass("redux-typography"))return;var n=e.parents(".redux-field:first").data("id"),r=e.val();if(redux.folds[n]&&redux.folds[n].children){var i={};t.each(redux.folds[n].children,function(e,s){t.each(s,function(t,s){i[s]||(i[s]={show:!1,hidden:!1});if(e==r||i[s]===!0)i[s].show=!0;i[s].show===!0&&jQuery("#"+n).parents("tr:first").hasClass("hiddenFold")&&(i[s].show=!1);i[s].show===!0&&jQuery("#"+redux.folds[n].parent).hasClass("hiddenFold")&&(i[s].show=!1);i[s].hidden=jQuery("#"+s).parents("tr:first").hasClass("hiddenFold")})});t.each(i,function(e){var t=jQuery("#"+e).parents("tr:first");i[e].show===!0?t.fadeIn("medium",function(){t.removeClass("hiddenFold");redux.folds[e]&&redux.folds[e].children}):i[e].hidden===!1&&t.fadeOut("medium",function(){t.addClass("hiddenFold");redux.folds[e].children})})}})}function redux_change(e){jQuery("body").trigger("check_dependencies",e);e.hasClass("compiler")&&jQuery("#redux-compiler-hook").val(1);e.hasClass("foldParent");window.onbeforeunload=confirmOnPageExit;if(jQuery(e).parents("fieldset.redux-field:first").hasClass("redux-field-error")){jQuery(e).parents("fieldset.redux-field:first").removeClass("redux-field-error");jQuery(e).parent().find(".redux-th-error").slideUp();var t=jQuery(e).closest(".redux-group-tab").attr("id"),n=!0;jQuery("#"+t+" .redux-field-error").each(function(){n=!1});if(n){jQuery("#"+t+"_li .redux-menu-error").hide();jQuery("#"+t+"_li .redux-group-tab-link-a").removeClass("hasError")}}jQuery("#redux-save-warn").slideDown()}(function(e){"use strict";e.redux=e.redux||{};e(document).ready(function(){jQuery.fn.isOnScreen=function(){if(!window)return;var e=jQuery(window),t={top:e.scrollTop(),left:e.scrollLeft()};t.right=t.left+e.width();t.bottom=t.top+e.height();var n=this.offset();n.right=n.left+this.outerWidth();n.bottom=n.top+this.outerHeight();return!(t.right<n.left||t.left>n.right||t.bottom<n.top||t.top>n.bottom)};e.redux.required();e("body").on("change",".redux-main select, .redux-main radio, .redux-main input[type=checkbox], .redux-main input[type=hidden]",function(t){e.redux.check_dependencies(this)});e("body").on("check_dependencies",function(t,n){e.redux.check_dependencies(n)});for(var t=0;t<redux.fieldsHidden.length;t++)e.redux.check_dependencies(jQuery("#"+redux.fieldsHidden[t]))});e.redux.required=function(){e(".hiddenFold, .showFold").each(function(){var t=e(this),n=t.parents("tr:eq(0)"),r=t.data();if(t.hasClass("hiddenFold")){n.addClass("hiddenFold").attr("data-check-field",r.checkField).attr("data-check-comparison",r.checkComparison).attr("data-check-value",r.checkValue).attr("data-check-id",r.id).hide();t.removeClass("hiddenFold").removeAttr("data-check-field").removeAttr("data-check-comparison").removeAttr("data-check-value")}else{n.attr("data-check-field",r.checkField).attr("data-check-comparison",r.checkComparison).attr("data-check-value",r.checkValue).attr("data-check-id",r.id);t.removeClass("showFold").removeAttr("data-check-field").removeAttr("data-check-comparison").removeAttr("data-check-value")}});e(".fold").promise().done(function(){e(".foldParent").each(function(){if(e(this).attr("type")=="radio"&&e(this).attr("checked")!="checked")return;var t=e(this).parents(".redux-field:first").data("id");redux.folds[t]&&(redux.folds[t].parent||e.redux.verify_fold(e(this)))})})};e.redux.check_dependencies=function(t){var n=e(t),r=n.parents(".redux-group-tab:eq(0)");r.length||(r=e("body"));e(t).prop("type")=="checkbox"&&(e(t).is(":checked")?e(t).val("1"):e(t).val("0"));var i=n.parents(".redux-field:first").data("id"),s=r.find('tr[data-check-field="'+i+'"]'),o=t.value,u=n.parents("tr:eq(0)").is(".hiddenFold");if(!s.length)return;s.each(function(){var t=e(this),n=t.data(),r=n.checkValue,i=!1,s="",a,f=t.find(".redux-field:first");f.hasClass("redux-container-info")&&(s=t.find(".redux-container-info").data("id"));if(!u)switch(n.checkComparison){case"=":case"equals":if(r.toString().indexOf("|")!==-1){a=r.split("|");e.inArray(o,a)!=-1&&(i=!0)}else o==r&&(i=!0);break;case"!=":case"not":if(r.toString().indexOf("|")!==-1){a=r.split("|");e.inArray(o,a)==-1&&(i=!0)}else o!=r&&(i=!0);break;case">":case"greater":case"is_larger":parseFloat(o)>parseFloat(r)&&(i=!0);break;case">=":parseFloat(o)>=parseFloat(r)&&(i=!0);break;case"<":case"less":case"is_smaller":parseFloat(o)<parseFloat(r)&&(i=!0);break;case"<=":parseFloat(o)<=parseFloat(r)&&(i=!0);break;case"contains":o.toString().indexOf(r)!=-1&&(i=!0);break;case"doesnt_contain":case"not_contain":o.toString().indexOf(r)==-1&&(i=!0);break;case"is_empty_or":if(o===""||o==r)i=!0;break;case"not_empty_and":o!==""&&o!=r&&(i=!0)}if(i===!0&&t.is(".hiddenFold")){s!==""&&e("#info-"+s).css({display:"none"}).fadeIn(300).show();t.css({display:"none"}).removeClass("hiddenFold").find("select, radio, input[type=checkbox]").trigger("change");t.fadeIn(300)}else if(i===!1&&!t.is(".hiddenFold")){s!==""&&e("#info-"+s).css({display:""}).fadeOut(300).hide();t.css({display:""}).addClass("hiddenFold").find("select, radio, input[type=checkbox]").trigger("change");t.fadeOut(300)}})};e.redux.verify_fold=function(t){var n=t.parents(".redux-field:first").data("id"),r=t.val(),i=t.parents(".redux-groups-accordion-group:first").length>0?t.parents(".redux-groups-accordion-group:first"):t.parents(".redux-group-tab:eq(0)");if(redux.folds[n]&&redux.folds[n].children){var s={};e.each(redux.folds[n].children,function(t,o){e.each(o,function(e,o){s[o]||(s[o]={show:!1,hidden:!1});if(t==r||s[o]===!0)s[o].show=!0;s[o].show===!0&&i.find('tr[data-check-id="'+n+'"]').hasClass("hiddenFold")&&(s[o].show=!1);s[o].show===!0&&i.find('tr[data-check-id="'+redux.folds[n].parent+'"]').hasClass("hiddenFold")&&(s[o].show=!1);s[o].hidden=i.find('tr[data-check-id="'+o+'"]').hasClass("hiddenFold")})});e.each(s,function(t){var n=i.find('tr[data-check-id="'+t+'"]');s[t].show===!0?n.fadeIn("medium",function(){n.removeClass("hiddenFold");redux.folds[t]&&redux.folds[t].children&&e.redux.verify_fold(n.find("select, radio, input[type=checkbox], input[type=hidden]"))}):s[t].hidden===!1&&n.fadeOut("medium",function(){n.addClass("hiddenFold");redux.folds[t].children&&e.redux.verify_fold(n.find("select, radio, input[type=checkbox], input[type=hidden]"))})})}}})(jQuery);jQuery.noConflict();var confirmOnPageExit=function(e){e=e||window.event;var t=redux.args.save_pending;e&&(e.returnValue=t);window.onbeforeunload=null;return t};jQuery(document).ready(function(e){function t(e){return decodeURI(((new RegExp(e+"="+"(.+?)(&|$)")).exec(location.search)||[,""])[1])}function i(e){console.log("here");var t=e.find(".expand_options"),n=e.find(".redux-sidebar").width(),r=jQuery(".redux-group-menu .active a").data("rel")+"_section_group";if(t.hasClass("expanded")){t.removeClass("expanded");e.find(".redux-main").removeClass("expand");e.find(".redux-sidebar").stop().animate({"margin-left":"0px"},500);e.find(".redux-main").stop().animate({"margin-left":n},500);e.find(".redux-group-tab").each(function(){jQuery(this).attr("id")!==r&&jQuery(this).fadeOut("fast")})}else{t.addClass("expanded");e.find(".redux-main").addClass("expand");e.find(".redux-sidebar").stop().animate({"margin-left":-n-102},500);e.find(".redux-main").stop().animate({"margin-left":"0px"},500);e.find(".redux-group-tab").fadeIn()}return!1}function o(){var e=jQuery("#info_bar").width()-2;if(!jQuery("#info_bar").isOnScreen()&&!jQuery("#redux-footer-sticky").isOnScreen()){jQuery("#redux-footer").css({position:"fixed",bottom:"0",width:e});jQuery("#redux-footer").addClass("sticky-footer-fixed");jQuery("#redux-sticky-padder").show()}else{jQuery("#redux-footer").css({background:"#eee",position:"inherit",bottom:"inherit",width:"inherit"});jQuery("#redux-sticky-padder").hide();jQuery("#redux-footer").removeClass("sticky-footer-fixed")}}jQuery(".redux-action_bar, .redux-presets-bar").on("click",function(){window.onbeforeunload=null});jQuery().tipsy&&e(".tips").tipsy({fade:!0,gravity:"s",opacity:.7});e("#toplevel_page_"+redux.args.slug+" .wp-submenu a").click(function(t){t.preventDefault();var n=e(this).attr("href").split("&tab=");e("#"+n[1]+"_section_group_li_a").click();console.log(n[1]);return!1});jQuery(".redux-group-tab-link-a").click(function(){relid=jQuery(this).data("rel");jQuery("#currentSection").val(relid);e.cookie("redux_current_tab",relid,{expires:7,path:"/"});e("#toplevel_page_"+redux.args.slug+" .wp-submenu a.current").removeClass("current");e("#toplevel_page_"+redux.args.slug+" .wp-submenu li.current").removeClass("current");e("#toplevel_page_"+redux.args.slug+" .wp-submenu a").each(function(){var t=e(this).attr("href").split("&tab=");if(t[1]==relid){e(this).addClass("current");e(this).parent().addClass("current")}});var t=jQuery(".redux-group-tab-link-li.active .redux-group-tab-link-a").data("rel");jQuery("#"+t+"_section_group_li").removeClass("active");jQuery("#"+t+"_section_group").hide();jQuery("#"+relid+"_section_group").fadeIn(200,function(){jQuery("#redux-footer").length!==0&&o()});jQuery("#"+relid+"_section_group_li").addClass("active")});var n=t("tab");if(n!==""){if(e.cookie("redux_current_tab_get")!==n){e.cookie("redux_current_tab",n,{expires:7,path:"/"});e.cookie("redux_current_tab_get",n,{expires:7,path:"/"});jQuery("#"+n+"_section_group_li").click()}}else e.cookie("redux_current_tab_get")!==""&&e.removeCookie("redux_current_tab_get");var r=jQuery("#"+e.cookie("redux_current_tab")+"_section_group_li_a");e.cookie("redux_current_tab")===null||typeof e.cookie("redux_current_tab")=="undefined"||r.length===0?jQuery(".redux-group-tab-link-a:first").click():r.click();jQuery('input[name="'+redux.args.opt_name+'[defaults]"]').click(function(){if(!confirm(redux.args.reset_confirm))return!1;window.onbeforeunload=null});jQuery('input[name="'+redux.args.opt_name+'[defaults-section]"]').click(function(){if(!confirm(redux.args.reset_section_confirm))return!1;window.onbeforeunload=null});jQuery(".expand_options").click(function(e){e.preventDefault();i(jQuery(this).parents(".redux-container:first"));return!1});jQuery("#redux-import").click(function(e){if(jQuery("#import-code-value").val()===""&&jQuery("#import-link-value").val()===""){e.preventDefault();return!1}});jQuery("#redux-save").is(":visible")&&jQuery("#redux-save").slideDown();jQuery("#redux-imported").is(":visible")&&jQuery("#redux-imported").slideDown();jQuery(document.body).on("change","input, textarea, select",function(){jQuery(this).hasClass("noUpdate")||redux_change(jQuery(this))});jQuery("#redux-import-code-button").click(function(){if(jQuery("#redux-import-link-wrapper").is(":visible")){jQuery("#redux-import-link-wrapper").fadeOut("fast");jQuery("#import-link-value").val("")}jQuery("#redux-import-code-wrapper").fadeIn("slow")});jQuery("#redux-import-link-button").click(function(){if(jQuery("#redux-import-code-wrapper").is(":visible")){jQuery("#redux-import-code-wrapper").fadeOut("fast");jQuery("#import-code-value").val("")}jQuery("#redux-import-link-wrapper").fadeIn("slow")});jQuery("#redux-export-code-copy").click(function(){jQuery("#redux-export-link-value").is(":visible")&&jQuery("#redux-export-link-value").fadeOut("slow");jQuery("#redux-export-code").toggle("fade")});jQuery("#redux-export-link").click(function(){jQuery("#redux-export-code").is(":visible")&&jQuery("#redux-export-code").fadeOut("slow");jQuery("#redux-export-link-value").toggle("fade")});var s=jQuery("#redux-footer").height();jQuery("#redux-sticky-padder").css({height:s});if(jQuery("#redux-footer").length!==0){jQuery(window).scroll(function(){o()});jQuery(window).resize(function(){o()})}jQuery("#redux-save, #redux-imported").delay(4e3).slideUp();jQuery("#redux-field-errors").delay(8e3).slideUp();jQuery(".redux-save").click(function(){window.onbeforeunload=null});e("#consolePrintObject").on("click",function(){console.log(jQuery.parseJSON(jQuery("#redux-object-json").html()))});typeof jsonView=="function"&&jsonView("#redux-object-json","#redux-object-browser");if(redux.errors!==undefined){jQuery("#redux-field-errors span").html(redux.errors.total);jQuery("#redux-field-errors").show();jQuery.each(redux.errors.errors,function(e,t){jQuery("#"+e+"_section_group_li_a").prepend('<span class="redux-menu-error">'+t.total+"</span>");jQuery("#"+e+"_section_group_li_a").addClass("hasError");jQuery.each(t.errors,function(e,t){console.log(t);jQuery("#"+redux.args.opt_name+"-"+t.id).addClass("redux-field-error");jQuery("#"+redux.args.opt_name+"-"+t.id).append('<div class="redux-th-error">'+t.msg+"</div>")})})}if(redux.warnings!==undefined){jQuery("#redux-field-warnings span").html(redux.warnings.total);jQuery("#redux-field-warnings").show();jQuery.each(redux.warnings.warnings,function(e,t){jQuery("#"+e+"_section_group_li_a").prepend('<span class="redux-menu-warning">'+t.total+"</span>");jQuery("#"+e+"_section_group_li_a").addClass("hasWarning");jQuery.each(t.warnings,function(e,t){jQuery("#"+redux.args.opt_name+"-"+t.id).addClass("redux-field-warning");jQuery("#"+redux.args.opt_name+"-"+t.id).append('<div class="redux-th-warning">'+t.msg+"</div>")})})}jQuery(".redux-section-tabs div").hide();jQuery(".redux-section-tabs div:first").show();jQuery(".redux-section-tabs ul li:first").addClass("active");jQuery(".redux-section-tabs ul li a").click(function(){jQuery(".redux-section-tabs ul li").removeClass("active");jQuery(this).parent().addClass("active");var t=e(this).attr("href");jQuery(".redux-section-tabs div").hide();jQuery(t).fadeIn();return!1})});